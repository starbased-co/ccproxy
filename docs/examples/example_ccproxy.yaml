# Example ccproxy.yaml configuration with custom rules
# This file demonstrates how to configure custom classification rules

ccproxy:
  # Basic settings
  debug: false
  metrics_enabled: true

  # Classification rules - evaluated in order
  rules:
    # Built-in rule: Route large requests to a model with higher context
    - label: large_context
      rule: ccproxy.rules.TokenCountRule
      params:
        - threshold: 80000

    # Custom rule: Priority users get premium model
    - label: premium
      rule: myproject.rules.PriorityUserRule
      params:
        - priority_users:
            - "ceo@company.com"
            - "cto@company.com"
            - "vip@customer.com"
          priority_keywords:
            - "urgent"
            - "critical"
            - "emergency"
            - "asap"

    # Custom rule: Use cheaper model during off-hours
    - label: off_hours
      rule: myproject.rules.TimeBasedRule
      params:
        - start_hour: 18    # 6 PM
          end_hour: 9       # 9 AM
          timezone: "US/Eastern"

    # Custom rule: Route very long conversations
    - label: long_conversation
      rule: myproject.rules.ContentLengthRule
      params:
        - 50000  # Total characters across all messages

    # Custom rule: Route vision requests to multimodal model
    - label: multimodal
      rule: myproject.rules.ModelCapabilityRule
      params:
        - require_vision: true
          require_function_calling: false
          require_streaming: false

    # Built-in rule: Background processing for Haiku model
    - label: background
      rule: ccproxy.rules.MatchModelRule
      params:
        - model_name: "claude-3-5-haiku"

    # Built-in rule: Thinking requests need special handling
    - label: think
      rule: ccproxy.rules.ThinkingFieldRule

    # Built-in rule: Web search requests
    - label: web_search
      rule: ccproxy.rules.WebSearchToolRule

# Note: Each label above must have a corresponding model_name entry
# in your LiteLLM config.yaml file. For example:
#
# model_list:
#   - model_name: default
#     litellm_params:
#       model: claude-3-5-sonnet-20241022
#
#   - model_name: large_context
#     litellm_params:
#       model: claude-3-opus-20240229
#
#   - model_name: premium
#     litellm_params:
#       model: gpt-4-turbo-preview
#
#   - model_name: off_hours
#     litellm_params:
#       model: gpt-3.5-turbo
#
#   - model_name: multimodal
#     litellm_params:
#       model: gpt-4-vision-preview
#
# etc...
